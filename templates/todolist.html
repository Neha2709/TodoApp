<html>
    <head> 
      
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

        <style>
        body {  
            /* padding-top: 60px;  */
            /* background-color:rgb(190, 220, 241); */
            background-image: linear-gradient(rgb(95, 111, 232), rgb(210, 213, 223));

        } 
        
        .dropdown{
            font-size: medium;
            border-radius:  3%;
            border-color: rgba(115, 164, 223, 0.778);
        }

        .form1{
            font-family: Tahoma, sans-serif;
            font-size: medium;
            border-style:solid;
            box-shadow: 10px;
            padding-top:  10px;
            border-color: aliceblue;
            background-color: white;
            padding: 5%;
        }

        .listed{
            font-family: Tahoma, sans-serif;
            text-transform:capitalize;
            background-color: white;
        }

        .table-striped > tbody > tr:nth-child(2n+1) > td, .table-striped > tbody > tr:nth-child(2n+1) > th {
            background-color: rgb(212, 226, 239);
        }


        </style>

</head> 
<body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">TODO Web App</a>
          </div>
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#viewdata">View My Tasks</a></li>
          </ul>
        </div>
      </nav>
    <div class="container-fluid" margin=100px>
        <div class="row" style=" height: 15%; padding: 2%; font-size: 300%; ">
            <center> TODO </center>
        </div>
        <div class="row" style="margin-top: 20px;">
            <div class="col-sm-3"></div>
            <div class="col-sm-6 form1">
                <form action="/addTodoItem/" method = "post">{% csrf_token %}
                    <div class="form-outline mb-4">
                      Title : <input type="text" name="content" class="form-control" />
                    </div><br>
                    <div class="form-outline mb-4">
                        End Date : <input type="date" name="ETA" class="form-control" placeholder="ETA"/>
                    </div><br><br><br>
                    <div class ="row">
                        <div class="col-sm-4">
                            <div class="form-outline mb-4">
                                <div class="dropdown">
                                    <label for="status">Status:</label>
                                    <select id="status" name="status">
                                        <option value="Not started">Not started</option>
                                        <option value="In Progress">In Progress</option>
                                        <option value="Completed">Completed</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4"><button type="submit" class="btn btn-primary btn-block mb-4">Add</button></div>
                    </div>
                    </div>
                  </form>
            </div>
            <div class="col-sm-3"></div>
        </div>
        <br><br><br><br>
        <div class="row listed" style="padding: 1%;" id="viewdata">
                <div class="col-sm-12 lists" style="font-family: Tahoma, sans-serif; font-size: medium;">
                    <form action="/filterByStatus/" method = "post">{% csrf_token %}
                    <div><select id="status" name="status" style="height: 5%; width: 10%;">
                        <option value="Not started">Not started</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Completed">Completed</option>
                    </select>
                    <button type="submit" class="btn-primary" style="width: 7%; height: 5%;">Filter</button>
                    </div>
                    </form><br>
                    <input class="form-control" id="myInput" type="text" placeholder="Search.."><br>

                    <table class="table table-striped">
                        <thead style="background-color: black; color:white">
                            <tr>
                              <th scope="col">Content</th>
                              <th scope="col">Status</th>
                              <th scope="col">End Date</th>
                              <th scope="col">Actions</th>
                            </tr>
                          </thead>
                          <tbody id="myTable">
                              {% for i in all_items %} 
                              <tr>
                                  <td>{{i.content}}</td>
                                  <td>{{i.status}}</td>
                                  <td>{{i.ETA}}</td>
                                  <td>
                                    <form action="/changeStatus/{{i.id}}/" method = "post">{% csrf_token %}
                                        <input type="submit" value="ChangeStatus" class="btn btn-success ms-1" style="width: 150px; height:32px"> 
                                        &emsp;
                                        <select id="status" name="status" style="width: 500px; height:32px">
                                            <option value="Not started">Not started</option>
                                            <option value="In Progress">In Progress</option>
                                            <option value="Completed">Completed</option>
                                        </select>
                                    </form>  
                                    <form action="/deleteTodoItem/{{i.id}}/" method = "post">{% csrf_token %}
                                        <input type="submit" value="Delete" class="btn btn-danger" style="width: 150px; height:32px">
                                    </form>  
                                  </td>
                                </tr>
                              {% endfor %}
                          </tbody>
                    </table>
                </div>
        </div>
      </div>  
      
      <script>
        $(document).ready(function(){
          $("#myInput").on("keyup", function() {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function() {
              $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
          });
        });
        </script>
</body>
</html>